# Finvy — Умный финансовый ассистент

## Краткое описание

**Finvy** — мобильное приложение для управления личными финансами с AI-анализом чеков, отслеживанием рынков в реальном времени, умными рекомендациями по экономии и инвестициям. Целевой рынок — Казахстан и СНГ.

**Платформа:** iOS / Android (React Native, Expo)  
**Языки интерфейса:** Русский, Казахский, Английский  
**Версия:** 1.0.0

---

## Проблема

- Люди не отслеживают свои расходы и не знают, куда уходят деньги
- Чеки копятся и теряются — нет удобного инструмента для их анализа
- Нет простого доступа к финансовым рынкам для обычного пользователя
- Отсутствие персонализированных советов по экономии и инвестициям на казахстанском рынке

## Решение

Finvy автоматизирует финансовый учёт: достаточно сфотографировать чек — AI распознает все товары, категоризирует расходы и даст советы по экономии. Приложение также показывает котировки рынков, помогает составить инвестиционный план и выступает персональным финансовым AI-ассистентом.

---

## Экраны приложения (6 основных вкладок)
 При установке приложения появляется экран с политикой соглашения на обработку персональных данных
### 1. Чеки (Receipts)
**Назначение:** Центральный хаб для учёта расходов

- Список всех отсканированных чеков с суммами, магазинами и датами
- Карточка общей суммы расходов
- Кнопка добавления нового чека → переход к камере
- Предпросмотр товаров в каждом чеке
- Удаление чеков долгим нажатием
- Pull-to-refresh для обновления данных

**Сервисы:** Firebase Firestore (хранение), Groq Vision API / Google Gemini (распознавание)

---

### 2. Аналитика (Analytics)
**Назначение:** Умный анализ расходов и рекомендации

- **Сводка:** общие расходы, кол-во чеков, товаров, средний чек
- **Потенциальная экономия:** AI-анализ по категориям (премиум-покупки, рестораны, продукты, развлечения) с расчётом конкретной суммы экономии в тенге
- **Распределение расходов:** по типам (Необходимое / Стандартное / Премиум / Здоровье)
- **Категории расходов:** с процентами и персональными советами (12 категорий: Продукты, Дом и быт, Рестораны, Одежда, Красота, Здоровье, Техника, Развлечения, Транспорт, Образование, Коммунальные, Другое)
- **Предупреждения:** при превышении 30% трат на премиум-категории
- **Топ магазинов:** рейтинг мест, где тратите больше всего
- **Куда инвестировать:** актуальные котировки акций, крипты и золота в реальном времени с рекомендациями
- **Инвестиционный план:** интерактивный квиз из 6 вопросов, генерирующий персональный портфель
- **Партнёрские ссылки:** Freedom Finance (акции), Bybit (крипто)

**Сервисы:** Firebase Firestore, Market API Service (Finnhub, Binance, MetalpriceAPI)

---

### 3. Рынки (Markets)
**Назначение:** Отслеживание финансовых рынков в реальном времени

4 вкладки:

- **Акции** — котировки AAPL, MSFT, GOOGL, AMZN, TSLA, NVDA, META + акции KASE (CCBN, KCEL, HSBK, KEGC)
- **Крипта** — BTC, ETH, BNB, SOL, ADA, DOT, DOGE, XRP, AVAX, MATIC
- **Металлы** — Золото ($/oz + ₸/г), Серебро ($/oz + ₸/г), Платина, Палладий
- **Валюты** — USD/KZT, EUR/KZT, GBP/KZT, CNY/KZT, RUB/KZT, TRY/KZT, AED/KZT, JPY/KZT

Функции:
- Индикатор Live / Demo
- Сводка: сколько активов растёт / падает
- Автообновление каждые 60 секунд
- Pull-to-refresh
- Партнёрские баннеры для каждой вкладки (Bybit, Freedom Finance, Halyk Gold)

**Сервисы:**
| Вкладка | API | Авторизация |
|---------|-----|-------------|
| Акции (US) | Finnhub | API Key |
| Акции (KZ) | KASE (парсинг сайта) | — |
| Крипта | Binance | Бесплатно |
| Металлы | MetalpriceAPI | API Key |
| Валюты | exchangerate.host | Бесплатно |

---

### 4. Новости (News)
**Назначение:** Агрегатор новостей и AI-соцсеть

2 вкладки:

- **Новости** — встроенный браузер с сайтом Tengrinews.kz (главные новости Казахстана)
- **NEON** — AI-соцсеть идей и образов (собственная разработка, neon-extended.web.app)

Функции:
- Мини-браузер с навигацией (назад, домой, обновить)
- Адресная строка с индикатором загрузки
- Pull-to-refresh
- Поддержка навигации жестами

**Сервисы:** WebView (react-native-webview), Firebase Hosting (NEON)

---

### 5. AI-ассистент (Assistant)
**Назначение:** Персональный финансовый AI-советник

- Чат с AI на базе Groq (Llama 3.3 70B)
- Контекст: AI знает все ваши расходы, категории, магазины + текущие котировки рынков
- Быстрые промпты: «Проанализируй расходы», «Где можно сэкономить?», «Куда инвестировать?», «Финансовый совет»
- Множество чатов — создание, переключение, удаление
- История сохраняется локально (AsyncStorage)
- Партнёрский баннер «Начать инвестировать»

**Сервисы:** Groq API (Llama 3.3 70B Versatile), Market API Service

---

### 6. Профиль (Profile)
**Назначение:** Настройки и информация пользователя

- Аватар с инициалами
- Статистика: кол-во чеков, общая сумма расходов, кол-во товаров
- Переключатель языка (Русский / Қазақша / English)
- Меню: Настройки, Уведомления, Поддержка, О приложении
- Выход из аккаунта
- Версия приложения

**Сервисы:** Firebase Auth, AsyncStorage, i18next

---

## Дополнительные экраны

### Камера (Camera) — модальный экран
- Видоискатель камеры с направляющей рамкой
- Съёмка чека / выбор из галереи
- Автоматический AI-анализ изображения
- Превью с состоянием анализа
- Возврат на экран чеков после успешного сканирования

### Обучение (Learn) — образовательный раздел
- Статьи по финансовой грамотности от ведущих бирж
- Категории: Основы, Крипто, Акции, Металлы, Портфель
- Время чтения, советы

---

## AI-движок: как работает распознавание чеков

### Двойной AI-анализ
Приложение поддерживает два AI-провайдера для гибкости и надёжности:

| Провайдер | Модель | Назначение |
|-----------|--------|------------|
| **Groq** | Llama 4 Scout 17B (Vision) | Основной анализ чеков |
| **Google Gemini** | Gemini 1.5 Flash | Резервный анализ чеков |
| **Groq** | Llama 3.3 70B Versatile | AI-чат ассистент |

### Что извлекает AI из чека:
- **Магазин** — полное название
- **Дата** — в формате YYYY-MM-DD
- **Валюта** — автоопределение (₸, ₽, $, €)
- **Итого** — сумма из строки ИТОГО
- **Товары** — для каждого:
  - Полное название (расшифровка сокращений: «МОЛ ПАК 0.93» → «Молоко пастеризованное 0.93л»)
  - Количество и цена
  - Категория (из 12 возможных)
  - Тип (Essential / Standard / Luxury / Health)
  - Инсайт (полезный комментарий)
- **Привычка** — объективный вывод о покупке («покупка продуктов», «закупка бытовой химии»)

---

## Архитектура сервисов

```
┌─────────────────────────────────────────────────────┐
│                    Finvy Mobile App                  │
├──────────┬──────────┬───────────┬───────────────────┤
│  Firebase│  Groq AI │  Gemini   │   Market APIs     │
│  Auth +  │  Vision +│  Vision + │                   │
│ Firestore│  Chat    │  Chat     │                   │
├──────────┼──────────┼───────────┼───────────────────┤
│ • Логин  │ • Чеки   │ • Чеки   │ • Finnhub (акции) │
│ • Данные │ • Чат AI │ • Чат AI │ • Binance (крипта)│
│ • Чеки   │          │          │ • MetalpriceAPI   │
│          │          │          │ • exchangerate    │
│          │          │          │ • KASE (парсинг)  │
└──────────┴──────────┴───────────┴───────────────────┘
```

---

## Партнёрская программа

Интегрированы партнёрские ссылки на 3 экранах:

| Партнёр | Сервис | Где показывается |
|---------|--------|------------------|
| **Bybit** | Покупка криптовалюты | Рынки (Крипта), Аналитика |
| **Freedom Finance** | Покупка акций, обмен валют | Рынки (Акции, Валюты), Аналитика, AI-ассистент |
| **Halyk Gold** | Покупка золота | Рынки (Металлы) |

Все ссылки настраиваются в одном файле `src/config/affiliateLinks.ts`.

---

## Технологический стек

### Frontend
- **React Native** 0.81 + **Expo** SDK 54
- **TypeScript** 5.9
- **React Navigation** 7 (Stack + Bottom Tabs)
- **i18next** — интернационализация

### Backend & Data
- **Firebase Auth** — аутентификация
- **Firebase Firestore** — хранение чеков
- **AsyncStorage** — локальный кэш, настройки, история чатов

### AI & ML
- **Groq API** — Llama 4 Scout (Vision) + Llama 3.3 70B (Chat)
- **Google Gemini API** — Gemini 1.5 Flash (резервный)

### Market Data (5 API)
- **Finnhub** — акции США
- **KASE** — акции Казахстана (парсинг)
- **Binance** — криптовалюты
- **MetalpriceAPI** — драгоценные металлы
- **exchangerate.host** — валютные курсы

### UI/UX
- Тёмная тема
- Градиенты (expo-linear-gradient)
- Иконки (Ionicons)
- Адаптивный дизайн

---

## Монетизация

1. **Партнёрские ссылки** — комиссия за регистрации на Bybit, Freedom Finance, Halyk Gold
2. **Премиум-подписка** (планируется) — расширенная аналитика, больше AI-запросов
3. **Рекламные интеграции** — нативные баннеры финансовых продуктов

---

## Целевая аудитория

- **Возраст:** 18–45 лет
- **Геолокация:** Казахстан, СНГ
- **Портрет:** молодые профессионалы, студенты, семьи — кто хочет контролировать расходы и начать инвестировать
- **Боль:** не понимают, куда уходят деньги; не знают, с чего начать инвестировать

---

## Конкурентные преимущества

1. **AI-распознавание чеков** — не нужно вводить данные вручную
2. **Локализация для Казахстана** — тенге, KASE, Halyk Gold, казахский язык
3. **Всё в одном** — расходы + рынки + AI-советник + обучение + новости
4. **Бесплатные API** — минимальные затраты на инфраструктуру
5. **Три языка** — русский, казахский, английский
6. **Интеграция с NEON** — собственная AI-соцсеть

---

## Дорожная карта

### MVP (текущий этап) ✅
- Сканирование чеков с AI
- Аналитика расходов
- Котировки рынков
- AI-ассистент
- Партнёрские ссылки

### v1.1 (ближайшее)
- Push-уведомления о расходах
- Бюджеты и лимиты по категориям
- Экспорт данных (PDF, Excel)

### v1.2
- Премиум-подписка
- Семейные аккаунты
- Интеграция с Kaspi / Halyk банком

### v2.0
- Автоматический импорт транзакций из банков
- Прогнозирование расходов (ML)
- Социальные функции (сравнение с друзьями)

---

## Контакты

**Приложение:** Finvy  
**Проект:** CheckAssistantMobile  
**AI-соцсеть:** NEON (neon-extended.web.app)
